<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Git操作说明 | Kite hsd的博客</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="专注于记录技术点滴">
    
    <link rel="preload" href="/hsd-VuePress/assets/css/0.styles.b1527ae7.css" as="style"><link rel="preload" href="/hsd-VuePress/assets/js/app.ddc8e8f6.js" as="script"><link rel="preload" href="/hsd-VuePress/assets/js/2.4cf46ed6.js" as="script"><link rel="preload" href="/hsd-VuePress/assets/js/3.3833a62e.js" as="script"><link rel="prefetch" href="/hsd-VuePress/assets/js/10.39d61fa1.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/11.4671f6a5.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/12.54b58676.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/13.db4ed1a2.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/14.a10cbf40.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/15.53ad8100.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/16.0dc78043.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/17.864d339a.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/18.9a0332c8.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/19.4e32888d.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/20.02071666.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/21.5df8f94a.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/22.09871d71.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/23.fdae05e9.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/24.342b817d.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/25.dc20ee83.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/26.35dcedd5.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/27.bb81a004.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/4.76d1ee60.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/5.de89caa6.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/6.0789f487.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/7.186d7b82.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/8.98011f8f.js"><link rel="prefetch" href="/hsd-VuePress/assets/js/9.d6e98b16.js">
    <link rel="stylesheet" href="/hsd-VuePress/assets/css/0.styles.b1527ae7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hsd-VuePress/" class="home-link router-link-active"><img src="/hsd-VuePress/img/DTM.jpg" alt="Kite hsd的博客" class="logo"> <span class="site-name can-hide">Kite hsd的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hsd-VuePress/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/hsd-VuePress/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/hsd-VuePress/js/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/hsd-VuePress/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/hsd-VuePress/git/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  GIT
</a></div><div class="nav-item"><a href="/hsd-VuePress/other/" class="nav-link">
  其他
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hsd-VuePress/vue/" class="nav-link">
  Vue
</a></div><div class="nav-item"><a href="/hsd-VuePress/react/" class="nav-link">
  React
</a></div><div class="nav-item"><a href="/hsd-VuePress/js/" class="nav-link">
  JS
</a></div><div class="nav-item"><a href="/hsd-VuePress/css/" class="nav-link">
  CSS
</a></div><div class="nav-item"><a href="/hsd-VuePress/git/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  GIT
</a></div><div class="nav-item"><a href="/hsd-VuePress/other/" class="nav-link">
  其他
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/hsd-VuePress/git/" aria-current="page" class="active sidebar-link">Git操作说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hsd-VuePress/git/#正常操作流程" class="sidebar-link">正常操作流程</a></li><li class="sidebar-sub-header"><a href="/hsd-VuePress/git/#异常情况" class="sidebar-link">异常情况</a></li><li class="sidebar-sub-header"><a href="/hsd-VuePress/git/#tortoisesvn-小乌龟-相关操作" class="sidebar-link">TortoiseSVN（小乌龟）相关操作</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="git操作说明"><a href="#git操作说明" class="header-anchor">#</a> Git操作说明</h1> <blockquote><p>git 仓库提交合并操作流程,避免合并冲突或代码丢失，以及方便进行 code review</p></blockquote> <h5 id="注意-1-master-和版本分支上绝对不能直接进行操作-2-使用小乌龟可以只看文字和图片部分-不用看命令行"><a href="#注意-1-master-和版本分支上绝对不能直接进行操作-2-使用小乌龟可以只看文字和图片部分-不用看命令行" class="header-anchor">#</a> 注意：1.master 和版本分支上绝对不能直接进行操作; 2.使用小乌龟可以只看文字和图片部分，不用看命令行</h5> <h2 id="正常操作流程"><a href="#正常操作流程" class="header-anchor">#</a> 正常操作流程</h2> <h4 id="_1-获取当前版本分支"><a href="#_1-获取当前版本分支" class="header-anchor">#</a> 1.获取当前版本分支</h4> <p>每次版本迭代都会在 master 的基础上新建一个当前版本的分支，如 dev_14_test</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> pull dev_14_test
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_2-从版本分支创建个人分支"><a href="#_2-从版本分支创建个人分支" class="header-anchor">#</a> 2.从版本分支创建个人分支</h4> <p>任何代码的修改都不能在版本分支上操作，必需得基于版本分支创建个人分支</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> checkout -b dev_personal_branch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_3-代码修改与提交"><a href="#_3-代码修改与提交" class="header-anchor">#</a> 3.代码修改与提交</h4> <p>在个人分支上修改代码完成后将个人分支推到远端库中，在远端库中与版本分支进行合并请求</p> <h6 id="如果是首次推到远端-执行以下命令"><a href="#如果是首次推到远端-执行以下命令" class="header-anchor">#</a> # 如果是首次推到远端，执行以下命令</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> push --set-upstream origin dev_personal_branch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h6 id="如果已经推到远端则直接push"><a href="#如果已经推到远端则直接push" class="header-anchor">#</a> # 如果已经推到远端则直接push</h6> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> push
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_4-远端gitlab操作"><a href="#_4-远端gitlab操作" class="header-anchor">#</a> 4.远端GitLab操作</h4> <ul><li><p>提交后到远端进行合并操作，进入到 GitLab 页面，左侧菜单中选择 Merge Requests，选择右上角绿色按钮 ‘New merge request’，进入到下图页面，左侧为个人修改的分支，右侧选择被合并的目标分支，然后点击 Compare branches and continue 按钮
<img src="/hsd-VuePress/assets/img/NewMergeRequest.0a01e33b.jpg" alt="git"></p></li> <li><p>进入到合并请求提交页确认合并信息</p></li></ul> <h5 id="title-填写修改代码的标题"><a href="#title-填写修改代码的标题" class="header-anchor">#</a> # Title：填写修改代码的标题</h5> <h5 id="description-修改描述"><a href="#description-修改描述" class="header-anchor">#</a> # Description：修改描述</h5> <h5 id="assignee-提交人"><a href="#assignee-提交人" class="header-anchor">#</a> # Assignee：提交人</h5> <h5 id="source-branch-想要合并的个人分支"><a href="#source-branch-想要合并的个人分支" class="header-anchor">#</a> # Source branch：想要合并的个人分支</h5> <h5 id="target-branch-被合并的目标分支"><a href="#target-branch-被合并的目标分支" class="header-anchor">#</a> # Target branch：被合并的目标分支</h5> <h5 id="remove-source-branch-when-merge-request-is-accepted-合并后在远端移除个人分支-建议勾选-避免远端分支过多"><a href="#remove-source-branch-when-merge-request-is-accepted-合并后在远端移除个人分支-建议勾选-避免远端分支过多" class="header-anchor">#</a> # Remove source branch when merge request is accepted：合并后在远端移除个人分支(建议勾选，避免远端分支过多)</h5> <h5 id="commits-查看合并的-commits-log"><a href="#commits-查看合并的-commits-log" class="header-anchor">#</a> # Commits：查看合并的 commits log</h5> <h5 id="changes-查看合并的代码修改-方便进行-code-review"><a href="#changes-查看合并的代码修改-方便进行-code-review" class="header-anchor">#</a> # Changes：查看合并的代码修改，方便进行 code review</h5> <p><img src="/hsd-VuePress/assets/img/NewMergeRequest2.44659c0f.jpg" alt="git"></p> <ul><li>合并信息确认后点击按钮 Submit merge request 进入合并确认页</li></ul> <h5 id="如果先前没有勾选-remove-source-branch-when-merge-request-is-accepted-该页也可以选择勾选-remove-source-branch"><a href="#如果先前没有勾选-remove-source-branch-when-merge-request-is-accepted-该页也可以选择勾选-remove-source-branch" class="header-anchor">#</a> # 如果先前没有勾选 Remove source branch when merge request is accepted，该页也可以选择勾选 Remove source branch</h5> <h5 id="discussion-其他开发者可以对本次合并请求进行评价"><a href="#discussion-其他开发者可以对本次合并请求进行评价" class="header-anchor">#</a> # Discussion：其他开发者可以对本次合并请求进行评价</h5> <h5 id="commits-检查合并的commits-log"><a href="#commits-检查合并的commits-log" class="header-anchor">#</a> # Commits：检查合并的commits log</h5> <h5 id="changes-检查合并的代码变更-在合并前最重要的步骤-查看所有修改代码"><a href="#changes-检查合并的代码变更-在合并前最重要的步骤-查看所有修改代码" class="header-anchor">#</a> # Changes：检查合并的代码变更，在合并前最重要的步骤，查看所有修改代码</h5> <p><img src="/hsd-VuePress/assets/img/NewMergeRequest3.0482bd34.jpg" alt="git"></p> <ul><li>全部确认无误后点击绿色按钮 Merge 合并分支</li></ul> <hr> <h2 id="异常情况"><a href="#异常情况" class="header-anchor">#</a> 异常情况</h2> <p>很多情况下都会导致合并冲突，比如两个分支中同时修改了一段代码，或者 commits 错乱等
一下情况是两个分支同时修改了同一段代码导致冲突</p> <p>此处我在 dev_14_test 上新建的个分支 dev_personal_branch_err，修改了刚刚 dev_personal_branch 分支上同一段代码并提交</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>    <span class="token function">git</span> checkout dev_14_test
    <span class="token function">git</span> checkout -b dev_personal_branch_err
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/hsd-VuePress/assets/img/NewMergeRequest4.14b73c1d.jpg" alt="git"></p> <p>此时 Merge 按钮无法点击，阻止错误继续下去，有很多方法可以解决冲突，个人比较喜欢用 rebase 的方式解决</p> <h5 id="首先声明-所以操作都只能是在个人的分支上进行操作"><a href="#首先声明-所以操作都只能是在个人的分支上进行操作" class="header-anchor">#</a> 首先声明，所以操作都只能是在个人的分支上进行操作</h5> <ul><li>第一步是先 copy 个人分支作为备份，以免误操作导致修改代码丢失</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>    <span class="token function">git</span> checkout dev_personal_branch_err
    <span class="token function">git</span> checkout -b copy_dev_personal_branch_err
    <span class="token function">git</span> checkout dev_personal_branch_err
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>然后我们再回到 dev_personal_branch_err 分支上，基于远端的 dev_14_test 分支就行 rebase 操作</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>    <span class="token function">git</span> pull --rebase origin dev_14_test
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>此时就会显示冲突的情况</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>First, rewinding <span class="token function">head</span> to replay your work on <span class="token function">top</span> of it<span class="token punctuation">..</span>.
Applying: 冲突代码
Using index info to reconstruct a base tree<span class="token punctuation">..</span>.
M	README.md
Falling back to patching base and <span class="token number">3</span>-way merge<span class="token punctuation">..</span>.
Auto-merging README.md
CONFLICT <span class="token punctuation">(</span>content<span class="token punctuation">)</span>: Merge conflict <span class="token keyword">in</span> README.md
error: Failed to merge <span class="token keyword">in</span> the changes.
Patch failed at 0001 冲突代码
The copy of the patch that failed is found in: .git/rebase-apply/patch

Resolve all conflicts manually, mark them as resolved with
<span class="token string">&quot;git add/rm &lt;conflicted_files&gt;&quot;</span>, <span class="token keyword">then</span> run <span class="token string">&quot;git rebase --continue&quot;</span><span class="token builtin class-name">.</span>
You can instead skip this commit: run <span class="token string">&quot;git rebase --skip&quot;</span><span class="token builtin class-name">.</span>
To abort and get back to the state before <span class="token string">&quot;git rebase&quot;</span>, run <span class="token string">&quot;git rebase --abort&quot;</span><span class="token builtin class-name">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>查看 git 状态</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> status
rebase <span class="token keyword">in</span> progress<span class="token punctuation">;</span> onto 1ad7cd0
You are currently rebasing branch <span class="token string">'dev_personal_branch_err'</span> on <span class="token string">'1ad7cd0'</span><span class="token builtin class-name">.</span>
  <span class="token punctuation">(</span>fix conflicts and <span class="token keyword">then</span> run <span class="token string">&quot;git rebase --continue&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span>use <span class="token string">&quot;git rebase --skip&quot;</span> to skip this patch<span class="token punctuation">)</span>
  <span class="token punctuation">(</span>use <span class="token string">&quot;git rebase --abort&quot;</span> to check out the original branch<span class="token punctuation">)</span>

Unmerged paths:
  <span class="token punctuation">(</span>use <span class="token string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage<span class="token punctuation">)</span>
  <span class="token punctuation">(</span>use <span class="token string">&quot;git add &lt;file&gt;...&quot;</span> to mark resolution<span class="token punctuation">)</span>

	both modified:   README.md

no changes added to commit <span class="token punctuation">(</span>use <span class="token string">&quot;git add&quot;</span> and/or <span class="token string">&quot;git commit -a&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li><p>说明 README.md 文件有冲突，之后就是前往代码解决冲突，这里就不展示了</p></li> <li><p>修改完成后 git add，然后执行 git rebase --continue，如果有多次 commit 提交，会检查每一次 commit 是否有冲突，有可能需要重复解决冲突多次</p></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>    <span class="token function">git</span> <span class="token function">add</span> README.md
    <span class="token function">git</span> rebase --continue
    
    Applying: 冲突代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>当所有 commits 都 Applying 后，首先要检查代码运行是否正常，是否功能满足需求，然后将目前的 dev_personal_branch_err 分支推到远端，此时需要用到强推，因为变更了原先的该分支的 commit</li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>    <span class="token function">git</span> push origin dev_personal_branch_err -f 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>此时再到 GItLab 中查看，发现 Merge 按钮 变成可点击状态了</p> <hr> <h2 id="tortoisesvn-小乌龟-相关操作"><a href="#tortoisesvn-小乌龟-相关操作" class="header-anchor">#</a> TortoiseSVN（小乌龟）相关操作</h2> <p>小乌龟的相关操作也要符合整套流程</p> <h4 id="原则"><a href="#原则" class="header-anchor">#</a> 原则</h4> <ul><li>对于 master 和版本分支，本地只有 pull 的权限，没有 push 的权限</li> <li>所有代码修改都只能在本地和远端的个人分支上进行修改</li> <li>如果要对其他开发者的分支进行操作，将其他开发者的分支当做 master 或版本分支执行上面相同流程</li> <li>所有合并请求都在远端进行，避免冲突的忽视以及有迹可循</li> <li>在合并前code review ‘Changes’ 中的修改代码是否有明显问题</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/hsd-VuePress/assets/js/app.ddc8e8f6.js" defer></script><script src="/hsd-VuePress/assets/js/2.4cf46ed6.js" defer></script><script src="/hsd-VuePress/assets/js/3.3833a62e.js" defer></script>
  </body>
</html>
